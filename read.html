<!DOCTYPE html>
<html lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xwendin | MemTheLoca</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>

    <nav class="navbar">
        <div class="logo">MEMTHELOCA</div>
        <ul class="nav-links">
            <li><a href="index.html">Mal</a></li>
            <li><a href="derbar.html">Derbar</a></li>
        </ul>
    </nav>

    <article class="post-container" id="loading-msg">
        <h2 style="text-align:center; padding:50px; color:#888;">Tê barkirin...</h2>
    </article>

    <article class="post-container" id="content-area" style="display:none;">
        <div class="post-header">
            <img id="p-img" src="" alt="">
        </div>
        <div class="post-content">
            <span class="post-category" id="p-cat"></span>
            <h1 class="post-title" id="p-title"></h1>
            <span class="post-date" id="p-date"></span>
            
            <div class="post-text" id="p-text"></div>

            <a href="index.html" class="back-link">&larr; Vegere Malê</a>
        </div>
    </article>

    <script>
        const sheet_url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQyx_i8v-UP4oYwSbw516EYO8L7TNqh6RjyNNM-tpJAgEORHmFfhjyjdShUk_28-nuC5j1-pcoHcKOf/pub?output=csv';

        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id'); 

        if(postId) {
            Papa.parse(sheet_url, {
                download: true,
                header: false,
                complete: function(results) {
                 
                    const rows = results.data.reverse();
                    
                    const post = rows[postId];

                    if (post) {
                      
                        document.getElementById('p-cat').innerText = post[0]; // A
                        document.getElementById('p-title').innerText = post[1]; // B
                        document.getElementById('p-date').innerText = post[2]; // C
                        document.getElementById('p-img').src = post[3]; // D
                        document.getElementById('p-text').innerHTML = post[4]; // E
                        document.getElementById('loading-msg').style.display = 'none';
                        document.getElementById('content-area').style.display = 'block';
                      
                        document.title = post[1] + " | MemTheLoca";
                    } else {
                        document.getElementById('loading-msg').innerHTML = "Yazı bulunamadı!";
                    }
                }
            });
        } else {
            window.location.href = "index.html";
        }
    </script>

</body>
</html>
